<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>چارت بیت‌کوین و دامیننس تتر — 4H / 8H / 1D / هفتگی</title>
  <style>
    :root{--bg:#0b1020;--panel:#0f1724;--accent:#00d084;--muted:#98a0b3}
    html,body{height:100%;margin:0;font-family:Tahoma, Arial, 'Helvetica Neue', sans-serif;background:var(--bg);color:#e6eef6}
    .container{max-width:1200px;margin:18px auto;padding:14px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    h1{font-size:18px;margin:0}
    .controls{display:flex;gap:8px;align-items:center}
    .btn{background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.06);padding:6px 10px;border-radius:8px;cursor:pointer}
    .btn.active{color:#fff;border-color:rgba(0,208,132,0.9);box-shadow:0 6px 18px rgba(0,208,132,0.06)}
    .charts{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
    @media(min-width:900px){.charts{grid-template-columns:1fr 1fr}}
    .card{background:var(--panel);padding:8px;border-radius:10px}
    .card h2{font-size:14px;margin:0 0 8px 0;color:#cfeef0}
    .note{font-size:12px;color:var(--muted);margin-top:8px}
    footer{margin-top:14px;color:var(--muted);font-size:12px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>چارت: بیت‌کوین و دامیننس تتر — تایم‌فریم‌ها: 4 ساعته، 8 ساعته، 1 روزه و هفتگی</h1>
      <div class="controls" role="region" aria-label="تنظیمات تایم‌فریم">
        <button class="btn" data-interval="240">4 ساعته</button>
        <button class="btn" data-interval="480">8 ساعته</button>
        <button class="btn" data-interval="D">1 روزه</button>
        <button class="btn" data-interval="W">هفتگی</button>
      </div>
    </header>

    <div class="charts">
      <div class="card">
        <h2>قیمت بیت‌کوین (BINANCE:BTCUSDT)</h2>
        <div id="tv_btc" style="height:520px"></div>
        <div class="note">از کلیدهای بالا برای تغییر تایم‌فریم استفاده کنید.</div>
      </div>

      <div class="card">
        <h2>دامیننس تتر — USDT Dominance (CRYPTOCAP:USDT.D)</h2>
        <div id="tv_usdt" style="height:520px"></div>
        <div class="note">دامیننس تتر = سهم تتر از کل مارکت‌کپ کریپتو.</div>
      </div>
    </div>

    <footer>برای نمایش چارت اتصال اینترنت لازم است.</footer>
  </div>

  <script src="https://s3.tradingview.com/tv.js"></script>
  <script>
    const widgets = {
      btc: {container: 'tv_btc', symbol: 'BINANCE:BTCUSDT'},
      usdt: {container: 'tv_usdt', symbol: 'CRYPTOCAP:USDT.D'}
    };

    function createWidget(kind, interval){
      const cfg = {
        width: "100%",
        height: 520,
        symbol: widgets[kind].symbol,
        interval: interval,
        timezone: "Europe/Paris",
        theme: "dark",
        style: "1",
        locale: "fa",
        toolbar_bg: "#1f2937",
        enable_publishing: false,
        allow_symbol_change: true,
        hide_side_toolbar: false,
        container_id: widgets[kind].container
      };
      document.getElementById(cfg.container_id).innerHTML = '';
      return new TradingView.widget(cfg);
    }

    function init(interval){
      createWidget('btc', interval);
      createWidget('usdt', interval);
    }

    function waitForTV(){
      if(typeof TradingView !== 'undefined'){
        init('D');
      } else {
        setTimeout(waitForTV, 200);
      }
    }

    waitForTV();

    const buttons = document.querySelectorAll('.btn');
    buttons.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const interval = btn.getAttribute('data-interval');
        buttons.forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        init(interval);
      });
    });

    document.querySelector('.btn[data-interval="D"]').classList.add('active');
  </script>
</body>
  </html>
